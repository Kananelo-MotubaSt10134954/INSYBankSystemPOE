This is my server.js 
const fs = require("fs");
const path = require("path");
const http = require("http");
const https = require("https");
const express = require("express");
const helmet = require("helmet");
const rateLimit = require("express-rate-limit");
const xss = require("xss-clean");
const mongoSanitize = require("express-mongo-sanitize");
const session = require("express-session");
const cookieParser = require("cookie-parser");
const compression = require("compression");

require("dotenv").config({ path: path.join(__dirname, "config.env") });

const { connectToDatabase, closeDatabase } = require("./connect.cjs");

const app = express();

const HTTPS_PORT = process.env.HTTPS_PORT || 8443;
const HTTP_PORT = process.env.HTTP_PORT || 8080;

const keyPath = path.join(__dirname, "certs", "privatekey.pem");
const certPath = path.join(__dirname, "certs", "certificate.pem");

if (!fs.existsSync(keyPath) || !fs.existsSync(certPath)) {
  console.error("SSL certificate or key missing in server/certs/");
  process.exit(1);
}
const privateKey = fs.readFileSync(keyPath, "utf8");
const certificate = fs.readFileSync(certPath, "utf8");

// Security middlewares
app.use(helmet());
app.use(helmet.frameguard({ action: "deny" })); // protect against clickjacking
app.use(
  helmet.hsts({ maxAge: 63072000, includeSubDomains: true, preload: true })
); // HSTS

app.use(express.json({ limit: "10kb" }));
app.use(express.urlencoded({ extended: true }));
app.use(cookieParser());
app.use(compression());
app.use(xss()); // XSS sanitizer
app.use(mongoSanitize()); // protect against NoSQL injection

// Simple rate-limiter
const apiLimiter = rateLimit({
  windowMs: 15 * 60 * 1000,
  max: 120,
  standardHeaders: true,
  legacyHeaders: false,
});
app.use("/api/", apiLimiter);

// Sessions (for staff/admin area). In production move to Redis or connect-mongo.
app.use(
  session({
    secret: process.env.SESSION_SECRET || "replace_this_in_production",
    resave: false,
    saveUninitialized: false,
    cookie: {
      httpOnly: true,
      secure: true, // requires HTTPS
      sameSite: "strict",
      maxAge: 24 * 60 * 60 * 1000,
    },
  })
);

// Basic API route example (uses DB)
app.get("/api/health", (req, res) => res.json({ ok: true }));

app.get("/api/users", async (req, res) => {
  try {
    const db = await connectToDatabase();
    const users = await db.collection("Users").find().limit(100).toArray();
    res.json(users);
  } catch (err) {
    res.status(500).json({ error: "DB error" });
  }
});

app.get("/api/bankpayments", async (req, res) => {
  try {
    const db = await connectToDatabase();
    const payments = await db
      .collection("BankPayments")
      .find()
      .limit(100)
      .toArray();
    res.json(payments);
  } catch (err) {
    res.status(500).json({ error: "DB error" });
  }
});

// Serve frontend build if present (Vite -> dist)
const clientDist = path.join(__dirname, "..", "client", "dist");
if (fs.existsSync(clientDist)) {
  app.use(express.static(clientDist));
  app.get("*", (req, res) => res.sendFile(path.join(clientDist, "index.html")));
} else {
  app.get("/", (req, res) => res.send("API running. No client build found."));
}

// Start HTTPS server
https
  .createServer({ key: privateKey, cert: certificate }, app)
  .listen(HTTPS_PORT, () => {
    console.log(`üîê HTTPS server listening on https://localhost:${HTTPS_PORT}`);
  });

// Redirect HTTP to HTTPS
http
  .createServer((req, res) => {
    const host = req.headers.host
      ? req.headers.host.split(":")[0]
      : "localhost";
    const portPart = HTTPS_PORT && HTTPS_PORT != 443 ? `:${HTTPS_PORT}` : "";
    res.writeHead(301, { Location: `https://${host}${portPart}${req.url}` });
    res.end();
  })
  .listen(HTTP_PORT, () => {
    console.log(`‚û°Ô∏è HTTP redirect server listening on port ${HTTP_PORT}`);
  });

// shutdown gracefully
process.on("SIGINT", async () => {
  console.log("SIGINT received: closing DB connection");
  await closeDatabase();
  process.exit(0);
});   

This is connect.cjs
// const { MongoClient } = require("mongodb");
// require("dotenv").config({ path: "./config.env" });

// async function connectToDatabase() {
//   const Db = process.env.ATLAS_URI;

//   const client = new MongoClient(Db);

//   try {
//     await client.connect();
//     const collections = await client.db("Bank-Systems").collections();
//     collections.forEach((collection) =>
//       console.log(collection.s.namespace.collection)
//     );
//   } catch (e) {
//     console.error(e);
//   } finally {
//     await client.close();
//   }
// }
// connectToDatabase();

// const { MongoClient } = require("mongodb");
// require("dotenv").config({ path: "./config.env" });

// let client;
// let db;

// async function connectToDatabase() {
//   if (db) return db; // reuse existing connection

//   try {
//     client = new MongoClient(process.env.ATLAS_URI);
//     await client.connect();
//     db = client.db("Bank-Systems");
//     console.log(" Connected to MongoDB Atlas");

//     // Fetch and print collections
//     const collections = await client.db("Bank-Systems").collections();
//     collections.forEach((collection) =>
//       console.log(collection.s.namespace.collection)
//     );

//     return db;
//   } catch (e) {
//     console.error(" MongoDB connection error:", e);
//     throw e;
//   }
// }

// async function closeDatabase() {
//   if (client) {
//     await client.close();
//     console.log("üîå MongoDB connection closed");
//   }
// }

// module.exports = { connectToDatabase, closeDatabase };

const { MongoClient } = require("mongodb");
require("dotenv").config({ path: "./config.env" });

let client;
let db;

async function connectToDatabase() {
  if (db) return db;

  try {
    client = new MongoClient(process.env.ATLAS_URI, {
      useNewUrlParser: true,
      useUnifiedTopology: true,
    });
    await client.connect();
    db = client.db("Bank-Systems");
    console.log("‚úÖ Connected to MongoDB Atlas");

    // Print collections (safer)
    const collections = await db.collections();
    console.log("üìÇ Collections in Bank-Systems:");
    collections.forEach((c) => console.log(" -", c.collectionName));

    return db;
  } catch (e) {
    console.error("‚ùå MongoDB connection error:", e.message);
    throw e;
  }
}

async function closeDatabase() {
  if (client) {
    await client.close();
    console.log("üîå MongoDB connection closed");
    client = null;
    db = null;
  }
}

module.exports = { connectToDatabase, closeDatabase };


This is my Vite.config.cjs


This is my App.jsx
function App() {
  return (
    <>
      <div className="App">Hello Bank</div>
    </>
  );
}

export default App;


my config.env by the way thats not my password thats just an example  
ATLAS_URI=mongodb+srv://guygardner:pasword123@cluster0.qcaib6y.mongodb.net/Bank-Systems?retryWrites=true&w=majority&appName=Cluster0
SESSION_SECRET="replace_with_a_long_random_secret"
HTTPS_PORT=8443
HTTP_PORT=8080
NODE_ENV=production  

my mongo Has a Database in Cluster0 that has collections Users and BankPayment 
